<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing Coach App</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script src="writing-prompts.js"></script>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icons as inline SVG components
        const Feather = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path>
                <line x1="16" y1="8" x2="2" y2="22"></line>
                <line x1="17.5" y1="15" x2="9" y2="15"></line>
            </svg>
        );

        const Target = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="12" r="6"></circle>
                <circle cx="12" cy="12" r="2"></circle>
            </svg>
        );

        const Flame = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path>
            </svg>
        );

        const TrendingUp = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        const BookOpen = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const Sparkles = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
                <path d="M5 3v4"></path>
                <path d="M19 17v4"></path>
                <path d="M3 5h4"></path>
                <path d="M17 19h4"></path>
            </svg>
        );

        const WritingCoachApp = () => {
          const [todayWordCount, setTodayWordCount] = useState(0);
          const [dailyGoal, setDailyGoal] = useState(500);
          const [streak, setStreak] = useState(0);
          const [totalWords, setTotalWords] = useState(0);
          const [currentExercise, setCurrentExercise] = useState(null);
          const [showCheckIn, setShowCheckIn] = useState(false);
          const [completedToday, setCompletedToday] = useState(false);

          // writingExercises array is now loaded from writing-prompts.js

          const motivationalMessages = [
            "Every word you write is progress. Keep going!",
            "You're building your craft one sentence at a time.",
            "The stories only you can tell are waiting to be written.",
            "Consistency beats perfection. Show up today.",
            "Your voice matters. The page is waiting for it.",
            "Even rough drafts are closer to your goals than blank pages.",
            "Trust the process. Your writing is evolving.",
            "Great horror writers write even on the hard days.",
            "You're not just writing—you're becoming a writer.",
            "The literary magazines are waiting for your stories."
          ];

          useEffect(() => {
            const savedData = localStorage.getItem('writingCoachData');
            if (savedData) {
              const data = JSON.parse(savedData);
              const today = new Date().toDateString();
              
              if (data.lastCheckIn === today) {
                setTodayWordCount(data.todayWordCount || 0);
                setCompletedToday(data.completedToday || false);
              } else {
                const lastDate = new Date(data.lastCheckIn);
                const todayDate = new Date();
                const diffTime = todayDate - lastDate;
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === 1 && data.completedToday) {
                  setStreak(data.streak + 1);
                } else if (diffDays > 1) {
                  setStreak(0);
                } else {
                  setStreak(data.streak || 0);
                }
                
                setTodayWordCount(0);
                setCompletedToday(false);
              }
              
              setDailyGoal(data.dailyGoal || 500);
              setTotalWords(data.totalWords || 0);
            }
          }, []);

          useEffect(() => {
            const data = {
              todayWordCount,
              dailyGoal,
              streak,
              totalWords,
              lastCheckIn: new Date().toDateString(),
              completedToday
            };
            localStorage.setItem('writingCoachData', JSON.stringify(data));
          }, [todayWordCount, dailyGoal, streak, totalWords, completedToday]);

          const handleWordCountUpdate = (count) => {
            const newCount = Math.max(0, count);
            setTodayWordCount(newCount);
            
            if (newCount >= dailyGoal && !completedToday) {
              setCompletedToday(true);
              setTotalWords(prev => prev + (newCount - todayWordCount));
            } else if (newCount < dailyGoal && completedToday) {
              setCompletedToday(false);
            }
          };

          const getRandomExercise = () => {
            const randomIndex = Math.floor(Math.random() * writingExercises.length);
            setCurrentExercise(writingExercises[randomIndex]);
          };

          const getRandomMotivation = () => {
            const randomIndex = Math.floor(Math.random() * motivationalMessages.length);
            return motivationalMessages[randomIndex];
          };

          const progress = Math.min((todayWordCount / dailyGoal) * 100, 100);

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 p-6">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-8">
                  <div className="flex items-center justify-center mb-4">
                    <div className="w-12 h-12 text-purple-300"><Feather /></div>
                  </div>
                  <h1 className="text-4xl font-bold text-white mb-2">Your Writing Coach</h1>
                  <p className="text-purple-200">{getRandomMotivation()}</p>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                  <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                    <div className="flex items-center justify-between mb-4">
                      <div className="w-8 h-8 text-purple-300"><Target /></div>
                      <span className="text-2xl font-bold text-white">{todayWordCount}</span>
                    </div>
                    <div className="mb-2">
                      <div className="flex justify-between text-sm text-purple-200 mb-1">
                        <span>Today's Goal</span>
                        <span>{dailyGoal} words</span>
                      </div>
                      <div className="w-full bg-white/20 rounded-full h-3">
                        <div 
                          className="bg-gradient-to-r from-purple-400 to-pink-400 h-3 rounded-full transition-all duration-500"
                          style={{ width: `${progress}%` }}
                        />
                      </div>
                    </div>
                    {completedToday && (
                      <div className="flex items-center text-green-300 text-sm mt-2">
                        <div className="w-4 h-4 mr-1"><Sparkles /></div>
                        Goal completed!
                      </div>
                    )}
                  </div>

                  <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                    <div className="flex items-center justify-between mb-4">
                      <div className="w-8 h-8 text-orange-300"><Flame /></div>
                      <span className="text-2xl font-bold text-white">{streak}</span>
                    </div>
                    <p className="text-purple-200 text-sm">
                      {streak === 0 ? "Start your streak today!" : `${streak} day${streak > 1 ? 's' : ''} strong!`}
                    </p>
                  </div>

                  <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                    <div className="flex items-center justify-between mb-4">
                      <div className="w-8 h-8 text-blue-300"><TrendingUp /></div>
                      <span className="text-2xl font-bold text-white">{totalWords.toLocaleString()}</span>
                    </div>
                    <p className="text-purple-200 text-sm">Total words written</p>
                  </div>
                </div>

                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 mb-6">
                  <button
                    onClick={() => setShowCheckIn(!showCheckIn)}
                    className="w-full flex items-center justify-between text-left"
                  >
                    <div className="flex items-center">
                      <div className="w-6 h-6 text-purple-300 mr-3"><BookOpen /></div>
                      <h2 className="text-2xl font-bold text-white">Daily Check-In</h2>
                    </div>
                    <span className="text-purple-200 text-2xl">{showCheckIn ? '−' : '+'}</span>
                  </button>
                  
                  {showCheckIn && (
                    <div className="mt-6 space-y-4">
                      <div>
                        <label className="block text-purple-200 mb-2">How many words did you write today?</label>
                        <input
                          type="number"
                          value={todayWordCount}
                          onChange={(e) => handleWordCountUpdate(parseInt(e.target.value) || 0)}
                          className="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white text-lg focus:outline-none focus:ring-2 focus:ring-purple-400"
                          placeholder="Enter word count"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-purple-200 mb-2">Adjust your daily goal</label>
                        <input
                          type="number"
                          value={dailyGoal}
                          onChange={(e) => setDailyGoal(parseInt(e.target.value) || 500)}
                          className="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white text-lg focus:outline-none focus:ring-2 focus:ring-purple-400"
                          placeholder="Daily goal"
                        />
                      </div>
                    </div>
                  )}
                </div>

                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                  <div className="flex items-center justify-between mb-6">
                    <h2 className="text-2xl font-bold text-white">Today's Writing Exercise</h2>
                    <button
                      onClick={getRandomExercise}
                      className="px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all"
                    >
                      New Exercise
                    </button>
                  </div>
                  
                  {currentExercise ? (
                    <div className="space-y-4">
                      <div className="flex items-center">
                        <span className="px-3 py-1 bg-purple-500/30 text-purple-200 rounded-full text-sm">
                          {currentExercise.type}
                        </span>
                      </div>
                      <h3 className="text-xl font-semibold text-white">{currentExercise.title}</h3>
                      <p className="text-purple-100 leading-relaxed">{currentExercise.prompt}</p>
                    </div>
                  ) : (
                    <p className="text-purple-200 text-center py-8">
                      Click "New Exercise" to get started with today's writing prompt!
                    </p>
                  )}
                </div>

                <div className="text-center mt-8 text-purple-300 text-sm">
                  Keep writing. Keep growing. Your stories matter.
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WritingCoachApp />);
    </script>
</body>
</html>